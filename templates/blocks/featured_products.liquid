{% assign count = content_block.products | size %}

{%- if count <= 4 %}
  {%- assign spacing = "sc-mb" %}
{%- endif %}

<section class="SC-FeaturedProducts sc-expand sc-md:me-xlarge sc-pe-large sc-controls"
         id="SC-ContentBlock-{{ content_block.identifier }}">

  {% if content_block.title != blank or content_block.subtitle %}
  <div class="SC-FeaturedProducts_header sc-flex sc-justify-space-between sc-align-items-center {{ spacing }}">
    <div>
    {% if content_block.subtitle != blank %}
      <p class="sc-font-small sc-uppercase sc-mb-tiny sc-font-small sc-uppercase sc-mb-tiny">{{ content_block.subtitle }}</p>
    {% endif %}
    {% if content_block.title != blank %}
      <h2 class="sc-font-large sc-font-bold sc-uppercase sc-m-none">{{ content_block.title }}</h2>
    {% endif %}
    </div>
    <div>
      {%- if content_block.link_label != blank and content_block.link_target != blank %}
        <a href="{{ content_block.link_target }}" class="SC-Link">
          {{ content_block.link_label }}
        </a>
      {%- endif %}
    </div>
  </div>
  {% endif %}

  {% if count <= 4 %}
    <div class="sc-grid sc-two-to-four-column">
      {%- for product in content_block.products %}
        {%- render "products/card", product: product %}
      {%- endfor %}
    </div>
  {% elsif count >  4 %}
      <div class="sc-flex sc-gap sc-pb-base sc-mt" data-featured-slider="{{ content_block.identifier }}">
        {%- for product in content_block.products %}
          {%- render "products/card", product: product %}
        {%- endfor %}
      </div>
  {% endif %}
</section>
