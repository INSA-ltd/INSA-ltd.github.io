{% assign count = content_block.product_categories | size %}

{%- if count <= 4 %}
  {%- assign spacing = "sc-mb" %}
{%- else %}
  {%- assign spacing = "sc-ps-small" %}
{%- endif %}

<section class="SC-FeaturedCategories sc-expand sc-md:me-xlarge sc-pe-large sc-controls"
         id="SC-ContentBlock-{{ content_block.identifier }}">

  {% if content_block.title != blank or content_block.subtitle %}
  <div class="SC-FeaturedCategories_header sc-flex sc-justify-space-between sc-align-items-center {{ spacing }}">
    <div>
    {% if content_block.subtitle != blank %}
      <p class="sc-font-small sc-uppercase sc-mb-tiny sc-font-small sc-uppercase sc-mb-tiny">{{ content_block.subtitle }}</p>
    {% endif %}
    {% if content_block.title != blank %}
      <h2 class="sc-font-large sc-font-bold sc-uppercase sc-m-none">{{ content_block.title }}</h2>
    {% endif %}
    </div>
    <div>
      {%- if content_block.link_label != blank and content_block.link_target != blank %}
        <a href="{{ content_block.link_target }}" class="SC-Link">
          {{ content_block.link_label }}
        </a>
      {%- endif %}
    </div>
  </div>
  {% endif %}

  {% if count <= 4 %}
    <div class="sc-grid sc-two-to-four-column">
      {%- for product_category in content_block.product_categories %}
        <div class="sc-grid_item">
            <div class="SC-CategoryCard">
              <a href="{{ product_category.path }}" class="SC-ImageLink sc-mb-small">
                {%- if product_category.image %}
                  <img loading="lazy" src="{{ product_category.image.large_url }}"/>
                {%- else %}
                  <svg class="SC-Placeholder" width="400" viewBox="0 0 400 500">
                    <rect width="100%" height="100%"></rect>
                    <circle cx="50%" cy="50%" r="20%" fill="rgba(0,0,0,0.05)"/>
                  </svg>
                {%- endif %}
              </a>
              <a class="SC-HeadingLink" href="{{ product_category.path }}">
                <h4>{{ product_category.name }}</h4>
              </a>
            </div>
          </div>
      {%- endfor %}
    </div>
  {% elsif count >  4 %}
      <div class="sc-pb-base sc-flex sc-gap sc-mt" data-featured-slider="{{ content_block.identifier }}">
        {%- for product_category in content_block.product_categories %}
          <div class="sc-flex_item">
            <div class="SC-CategoryCard">
              <a href="{{ product_category.path }}" class="SC-ImageLink sc-mb-small">
                {%- if product_category.image %}
                  <img loading="lazy" src="{{ product_category.image.large_url }}"/>
                {%- else %}
                  <svg class="SC-Placeholder" width="400" viewBox="0 0 400 500">
                    <rect width="100%" height="100%"></rect>
                    <circle cx="50%" cy="50%" r="20%" fill="rgba(0,0,0,0.05)"/>
                  </svg>
                {%- endif %}
              </a>
              <a class="SC-HeadingLink" href="{{ product_category.path }}">
                <h4>{{ product_category.name }}</h4>
              </a>
            </div>
          </div>
        {%- endfor %}
      </div>
  {% endif %}
</section>
